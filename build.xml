<project default="compile">

  <!-- build.xml for Golder, W15, CS48
       name: Group 3-->

  <property environment="env"/> <!-- load the environment variables -->

  <target name="init" description="compile">
	<mkdir dir="build" />
  </target>
  
  <target name="compile" depends="init" description="compile">
    <javac srcdir="src" destdir="build" debug="true" debuglevel="lines,vars,source" includeantruntime = "false">
      <classpath>
        <pathelement location="build"/>
      </classpath>
    </javac>
  </target>

  <target name="run" depends="compile" description="run">
    <java fork="true" classname="Golder" classpath="build" />
  </target>

  <target name="compileConnectUser" depends="init" description="compile Connect test">
    <javac srcdir="src/Connection/" destdir="build" debug="true" debuglevel="lines,vars,source" includeantruntime = "false">
      <classpath>
        <pathelement location="build"/>
      </classpath>
    </javac>
  </target>

  <target name="compileLogin" depends="init,compileConnectUser" description="compile Login test">
    <javac srcdir="src/GUI/" destdir="build" debug="true" debuglevel="lines,vars,source" includeantruntime = "false">
	  <include name="Login.java" />
      <classpath>
        <pathelement location="build"/>
        <pathelement location="lib/mysql-connector-java-5.1.34-bin.jar"/>
      </classpath>
    </javac>
  </target>
  
  <target name="runLogin" depends="compileLogin" description="run Login">
    <java fork="true" classname="GUI.Login" classpath="build">
	  <classpath>
        <pathelement location="build"/>
		<pathelement location="lib/mysql-connector-java-5.1.34-bin.jar"/>
      </classpath>
	</java>
  </target>





 <target name="clean" description="delete unnecessary files and directories">
    <delete dir="build" quiet="true" />
  </target>

 <target name="test" depends="compile" description="Runs all files ending in Test.java">

    <junit haltonerror="no" haltonfailure="no">
       <classpath>
         <pathelement location="lib/junit-4.10.jar"/>
         <pathelement location="build"/>
       </classpath>

       <batchtest fork="yes">
          <fileset dir="src">
            <!-- this will pick up every class with a name ending in Test -->
            <include name="*Test.java"/>
          </fileset>
       </batchtest>

       <formatter type="plain" usefile="false" />

    </junit>
 </target>


</project>
